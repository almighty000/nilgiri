{% extends "base.html" %}

{% block content %}
<!-- Instances
================================================== -->
<section id="instances">
    <div class="page-header">
        <h1>Instances <small>Your running instances </small></h1>
    </div>

    <div class="row">
        <div id="running_instances" class="span12 columns image_section"><center><img src="/static/images/loading.gif" /></center></div>
    </div>
</section>
<script src="/static/assets/js/jquery.js"></script>
<script src="/static/js/main.js"></script>

<!-- Modal
================================================== -->
<section id="launch">
    <div class="page-header">
        <h1>Launch <small>Launch a new instance</small></h1>
    </div>

    <div class="row">
        <div class="span3 columns">
            <h3>About Instance</h3>
            <p>Select an image, select/create key and group. Finally, launch an instance.</p>
        </div>
        <div class="span9 columns">
            <h2>Live demo</h2>
            <div id="myModal" class="modal hide fade" style="width: 860px;">
                <div class="modal-header">
                    <a class="close" data-dismiss="modal" >&times;</a>
                    <h3>Launch Instance</h3>
                </div>
            <div class="modal-body launch_modal_div" style="height: 400px"><center><img src="/static/images/loading.gif" /></div>
            <div class="modal-footer">
            </div>
        </div>
        <a data-toggle="modal" href="#myModal" class="btn btn-primary btn-large launch_modal_button">Launch an instance</a>
<script>
    $("a.launch_modal_button").click(function() {
        $("div.modal-footer").html('<a href="#" class="btn" data-dismiss="modal" >Close</a>');
        $.ajax({
            url: "/images/describe_images",
            type: "POST",
            data: {
                csrfmiddlewaretoken: '{{ csrf_token }}'
            },

            success: function(data) {
                $("div.launch_modal_div").html(data);
            },
            crossDomain: false
        });
    });
</script>
    <hr>
    <div class="alert alert-info"><strong>Heads up!</strong> You will only be using EMIs <code>emi-xxxxxx</code></div>
        </div>
    </div>
</section>

<!-- Volumes
================================================== -->
<section id="volumes">
    <div class="page-header">
        <h1>Volumes <small>Available volumes in clusters</small></h1>
    </div>

    <div class="row">
        <div class="span12 columns">
            <h2>Description</h2>
                <p>Eucalyptus lets users create dynamic block volumes, which are analogous to raw block storage devices that can be used with VM instances. Users can create, attach, detach, describe, bundle, and delete volumes.</p>
                <h3>Available Volumes</h3>
                <hr>
        </div>
    </div>
</section>

<div class="tabbable" style="margin-bottom: 9px;">
    <ul class="nav nav-tabs">
        <li id="tab_create_volumes" class="active"><a href="#1" data-toggle="tab">Create Volumes</a></li>
        <li id="tab_describe_volumes"><a href="#2" data-toggle="tab">Volumes</a></li>
        <li id="tab_snapshots"><a href="#3" data-toggle="tab">Snapshots</a></li>
    </ul>
    <div class="tab-content">
        <div class="tab-pane active" id="1">
            <center><img src="/static/images/loading.gif" /></center>
        </div>
        <div class="tab-pane" id="2">
            <center><img src="/static/images/loading.gif" /></center>
        </div>
        <div class="tab-pane" id="3">
            <center><img src="/static/images/loading.gif" /></center>
        </div>
    </div>
</div> <!-- /tabbable -->


<script>
    $(document).ready(function() {
        $.ajax({
        url: "/instances/describe_instances",
        type: "POST",
        data: {
            csrfmiddlewaretoken: '{{ csrf_token }}'
        },
        success: function(data) {
            $("div#running_instances").html(data);
        },
        crossDomain: false
    });
    $("div.tab-pane").load("/volumes/create_volume_view");
});
$("li#tab_describe_volumes").click(function() {
    $("div.tab-pane").html('<center><img src="/static/images/loading.gif" /></center>');
    $.ajax({
        url: "/volumes/describe_volumes",
        type: "POST",
        data: {
          csrfmiddlewaretoken: '{{ csrf_token }}'
        },
        success: function(data) {
            $("div.tab-pane").html(data);
        },
        crossDomain: false
    });
});

$("li#tab_create_volumes").click(function() {
    $("div.tab-pane").load("/volumes/create_volume_view");
});

$("li#tab_snapshots").click(function() {
    $("div.tab-pane").load("/snapshots/describe_snapshot_view");

});

</script>

{% endblock %}
